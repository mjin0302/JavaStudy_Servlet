<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Insert title here</title>
  </head>
  <body>
    <div id="show">
      <table border="1">
        <thead id="head"></thead>
        <tbody id="list"></tbody>
      </table>
    </div>
    <script>
      const fruits = [
        { name: "apple", price: 100, like: 3.5 },
        { name: "banana", price: 200, like: 4.5 },
        { name: "cherry", price: 300, like: 5 },
      ];
      const titles = ["과일", "가격", "선호도"];

      titles.forEach((title) => {
        let th = document.createElement("th");
        th.innerText = title;
        head.append(th);
      });

      fruits.forEach((fruit, idx, ary) => {
        if (fruit.like > 4) {
          let tr = document.createElement("tr");
          for (let prop in fruit) {
            let td = document.createElement("td");
            td.innerText = fruit[prop];
            tr.append(td);
          }
          list.append(tr);
        }
      });

      //선호도 4이상 요소를 over4에 저장
      let over4 = [];
      fruits.forEach((fruit) => {
        if (fruit.like > 4) {
          over4.push(fruit);
        }
      });
      over4 = fruits.filter((fruit) => fruit.like > 4);
      console.log(over4);

      document.querySelectorAll("#list tr").forEach((tr) => {
        tr.firstChild.style.backgroundColor = "yellow";
      });

      let nFruit = fruits.map((fruit, idx) => {
        let nFruit = {};
        nFruit.ord = idx + 1;
        nFruit.fname = fruit.name;
        nFruit.price = fruit.price;
        return nFruit;
      });
      console.log(nFruit);

      //fruits의 배열에 있는 가격의 합:
      let priceSum = 0;
      fruits.forEach((fruit) => {
        priceSum += fruit.price;
      });
      console.log("가격의 합 : ", priceSum);

      // 3건 100, 200, 300
      // accum: 현재 순번의 이전값을 가져옴
      //reduce함수의 두번째 매개변수에 들어간것이 시작 초기값이 됨
      //reducd는 조건을 만족하는 새로운 값을 반환해줌
      let result = fruits.reduce((accum, item, idx, ary) => {
        console.log(accum, item, idx, ary);

        //return (accum += item.price);
        //return accum < item.price ? accum : item.price; //반환값이 다음 순번의 초기(accum) (if 조건문 ? accum=>true면 실행 되는거 , item.price => elseif일때 실행)
        //return accum > item.like ? accum : item.like;
        return;
      }, 0);

      console.log(result);

      //평점, 평균계산 : 3.5, 4.5, 5
      // [
      //   { name: "apple", price: 100, like: 3.5 },
      //   { name: "banana", price: 200, like: 4.5 },
      //   { name: "cherry", price: 300, like: 5 },
      // ];
      let result2 = fruits.reduce((acc, item, idx, ary) => {
        
         return idx == fruits.length ? (acc+item.like)/idx : acc+= item.like;
        //acc = 3.5
        //acc = 8
        //acc = 13
      }, 0);

      console.log(result2 / fruits.length);
    </script>
  </body>
</html>
